<ion-view view-title="Manter Quiz">

    <ion-nav-bar class="bar-positive" align-title="center">
        <ion-nav-back-button></ion-nav-back-button>
    </ion-nav-bar>
    <ion-nav-buttons side="right">
        <button class="button button-icon button-clear ion-checkmark-round" data-ng-click="manterQuizCtrl.salvarQuiz()"></button>
    </ion-nav-buttons>

    <ion-content class="has-footer">

        <ion-list-card>

            <div class="item item-input item-select">
                <span class="input-label">Disciplina</span>
                <select class="item-text-wrap" data-ng-options="disciplina as disciplina.nome for disciplina in manterQuizCtrl.arrayDisciplinas track by disciplina.id"
                    data-ng-model="manterQuizCtrl.quiz.disciplina" data-ng-change="manterQuizCtrl.listTemasByDisciplina(manterQuizCtrl.quiz.disciplina)">
                </select>
            </div>

            <ion-item class="item-input" data-ng-if="manterQuizCtrl.arrayDisciplinas && manterQuizCtrl.arrayDisciplinas.length > 0">
                <input type="search" placeholder="Descrição" data-ng-model="manterQuizCtrl.quiz.descricao">
            </ion-item>

            <ion-item class="item-divider">Filtro de Questões</ion-item>
            <ion-item class="item item-input item-select" data-ng-if="manterQuizCtrl.arrayDisciplinas && manterQuizCtrl.arrayDisciplinas.length > 0">
                <span class="input-label" data-ng-class="{'placeholder-icon' : !manterQuizCtrl.arrayTemas || manterQuizCtrl.arrayTemas.length === 0}">Tema</span>
                <select data-ng-disabled="!manterQuizCtrl.arrayTemas || manterQuizCtrl.arrayTemas.length === 0" data-ng-options="tema as tema.nome for tema in manterQuizCtrl.arrayTemas"
                    data-ng-model="manterQuizCtrl.filtroTema" data-ng-change="manterQuizCtrl.listQuestoesByTema(manterQuizCtrl.filtroTema)">
                </select>
            </ion-item>

            <ion-item class="item item-input item-select" data-ng-if="manterQuizCtrl.arrayDisciplinas && manterQuizCtrl.arrayDisciplinas.length > 0">
                <div class="input-label">
                    Nível
                </div>
                <select required data-ng-options="nivel as nivel for nivel in manterQuizCtrl.arrayNiveisQuestao" data-ng-model="manterQuizCtrl.filtroNivel"></select>
            </ion-item>

            <ion-item class="item-input" data-ng-if="manterQuizCtrl.arrayDisciplinas && manterQuizCtrl.arrayDisciplinas.length > 0">
                <i class="icon ion-search placeholder-icon"></i>
                <input type="search" placeholder="Filtrar Questões" data-ng-model="manterQuizCtrl.filtroTextoQuestao">
            </ion-item>

        </ion-list-card>

        <ion-list-card>
            <ion-item class="item-divider">Questões Disponíveis</ion-item>
            <ion-checkbox data-ng-repeat="questao in manterQuizCtrl.arrayQuestoes| filter : {'nivel' : manterQuizCtrl.filtroNivel} | filter : {'texto' : manterQuizCtrl.filtroTextoQuestao} track by $index"
                data-ng-model="questao.checked" data-ng-change="manterQuizCtrl.selecionarQuestao(questao)">
                {{questao.texto}}
            </ion-checkbox>

        </ion-list-card>

        <ion-list show-delete="true">
            <ion-item class="item-divider">Questões Selecionadas</ion-item>
            <ion-item data-ng-repeat="questao in manterQuizCtrl.quiz.questoes track by $index" data-ng-model="questao.checked">
                <ion-delete-button class="ion-minus-circled" data-ng-click="manterQuizCtrl.removerQuestaoSelecionada(questao, $index)"></ion-delete-button>
                {{questao.texto}}
            </ion-item>

        </ion-list>

    </ion-content>

<!--    <ion-tabs class="tabs-positive tabs-icon-only">
        <ion-tab icon-on="ion-checkmark-circled" icon-off="ion-checkmark-circled" data-ng-click="manterQuizCtrl.salvarQuiz()"></ion-tab>
        <ion-tab icon-on="ion-close-circled" icon-off="ion-close-circled" ui-sref="menu.quiz"></ion-tab>
    </ion-tabs>-->

</ion-view>